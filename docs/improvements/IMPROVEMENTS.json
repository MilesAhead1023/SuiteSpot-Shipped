{
  "document_version": "1.0",
  "generated": "2026-01-19",
  "project": "SuiteSpot BakkesMod Plugin",
  "repository_structure": {
    "plugin_hub": "SuiteSpot.h/cpp",
    "managers": [
      "MapManager.h/cpp",
      "TrainingPackManager.h/cpp",
      "SettingsSync.h/cpp",
      "AutoLoadFeature.h/cpp",
      "LoadoutManager.h/cpp"
    ],
    "ui_layer": [
      "SettingsUI.h/cpp",
      "TrainingPackUI.h/cpp",
      "LoadoutUI.h/cpp"
    ],
    "utilities": [
      "ConstantsUI.h",
      "HelpersUI.h/cpp",
      "StatusMessageUI.h/cpp",
      "MapList.h/cpp"
    ]
  },
  "bugs": [
    {
      "id": "BUG-001",
      "title": "Raw Pointer Memory Management",
      "priority": "HIGH",
      "complexity": "MEDIUM",
      "estimated_hours": 5,
      "files_affected": ["SuiteSpot.h", "SuiteSpot.cpp"],
      "description": "Managers use raw pointers with manual delete. Should use std::unique_ptr.",
      "current_code_location": "SuiteSpot.cpp:onUnload()",
      "fix_pattern": "convert_raw_to_unique_ptr",
      "changes": [
        {
          "file": "SuiteSpot.h",
          "action": "replace",
          "search": "MapManager* mapManager = nullptr;",
          "replace": "std::unique_ptr<MapManager> mapManager;"
        },
        {
          "file": "SuiteSpot.h",
          "action": "replace", 
          "search": "SettingsSync* settingsSync = nullptr;",
          "replace": "std::unique_ptr<SettingsSync> settingsSync;"
        },
        {
          "file": "SuiteSpot.h",
          "action": "replace",
          "search": "AutoLoadFeature* autoLoadFeature = nullptr;",
          "replace": "std::unique_ptr<AutoLoadFeature> autoLoadFeature;"
        },
        {
          "file": "SuiteSpot.h",
          "action": "replace",
          "search": "TrainingPackManager* trainingPackMgr = nullptr;",
          "replace": "std::unique_ptr<TrainingPackManager> trainingPackMgr;"
        },
        {
          "file": "SuiteSpot.h",
          "action": "replace",
          "search": "SettingsUI* settingsUI = nullptr;",
          "replace": "std::unique_ptr<SettingsUI> settingsUI;"
        },
        {
          "file": "SuiteSpot.h",
          "action": "replace",
          "search": "LoadoutUI* loadoutUI = nullptr;",
          "replace": "std::unique_ptr<LoadoutUI> loadoutUI;"
        },
        {
          "file": "SuiteSpot.cpp",
          "action": "replace",
          "search": "mapManager = new MapManager();",
          "replace": "mapManager = std::make_unique<MapManager>();"
        },
        {
          "file": "SuiteSpot.cpp",
          "action": "replace",
          "search": "settingsSync = new SettingsSync();",
          "replace": "settingsSync = std::make_unique<SettingsSync>();"
        },
        {
          "file": "SuiteSpot.cpp",
          "action": "replace",
          "search": "autoLoadFeature = new AutoLoadFeature();",
          "replace": "autoLoadFeature = std::make_unique<AutoLoadFeature>();"
        },
        {
          "file": "SuiteSpot.cpp",
          "action": "replace",
          "search": "trainingPackMgr = new TrainingPackManager();",
          "replace": "trainingPackMgr = std::make_unique<TrainingPackManager>();"
        },
        {
          "file": "SuiteSpot.cpp",
          "action": "replace",
          "search": "settingsUI = new SettingsUI(this);",
          "replace": "settingsUI = std::make_unique<SettingsUI>(this);"
        },
        {
          "file": "SuiteSpot.cpp",
          "action": "replace",
          "search": "loadoutUI = new LoadoutUI(this);",
          "replace": "loadoutUI = std::make_unique<LoadoutUI>(this);"
        },
        {
          "file": "SuiteSpot.cpp",
          "action": "replace_block",
          "function": "onUnload",
          "replace_with": "void SuiteSpot::onUnload() {\n    // Smart pointers auto-cleanup\n    LOG(\"SuiteSpot unloaded\");\n}"
        }
      ],
      "notes": "After this change, all member access via arrow operator remains unchanged. Only allocation/deallocation changes."
    },
    {
      "id": "BUG-002",
      "title": "Race Condition in TrainingPackUI State",
      "priority": "MEDIUM",
      "complexity": "LOW",
      "estimated_hours": 3,
      "files_affected": ["TrainingPackUI.h", "TrainingPackUI.cpp"],
      "description": "filteredPacks and selectedPackCode modified on render thread without mutex protection",
      "fix_pattern": "add_mutex_protection",
      "changes": [
        {
          "file": "TrainingPackUI.h",
          "action": "add_member",
          "location": "private section",
          "code": "mutable std::mutex uiStateMutex;"
        },
        {
          "file": "TrainingPackUI.h",
          "action": "add_include",
          "code": "#include <mutex>"
        }
      ]
    },
    {
      "id": "BUG-003",
      "title": "Inconsistent Null Checking",
      "priority": "MEDIUM", 
      "complexity": "LOW",
      "estimated_hours": 3,
      "files_affected": ["SettingsUI.cpp", "TrainingPackUI.cpp", "LoadoutUI.cpp"],
      "description": "Some code paths don't check for null before accessing plugin members",
      "fix_pattern": "add_null_guards",
      "audit_pattern": "Search for 'plugin_->' without preceding null check"
    },
    {
      "id": "BUG-004",
      "title": "Workshop Path Buffer Overflow",
      "priority": "LOW",
      "complexity": "LOW",
      "estimated_hours": 1,
      "files_affected": ["SettingsUI.h"],
      "description": "workshopPathBuf fixed at 512 chars may truncate long paths",
      "changes": [
        {
          "file": "SettingsUI.h",
          "action": "replace",
          "search": "char workshopPathBuf[512] = {0};",
          "replace": "char workshopPathBuf[1024] = {0};"
        }
      ]
    }
  ],
  "performance_issues": [
    {
      "id": "PERF-001",
      "title": "Filter Recalculation Every Frame",
      "priority": "HIGH",
      "complexity": "LOW",
      "estimated_hours": 3,
      "files_affected": ["TrainingPackUI.cpp"],
      "description": "Filters applied on every render even when unchanged",
      "fix_pattern": "dirty_flag_caching",
      "implementation": {
        "add_member": "bool filtersDirty_ = true;",
        "add_method": "void MarkFiltersDirty() { filtersDirty_ = true; }",
        "modify_render": "Only call ApplyFilters() when filtersDirty_ is true, then set to false"
      }
    },
    {
      "id": "PERF-002",
      "title": "Column Width Recalculation",
      "priority": "MEDIUM",
      "complexity": "LOW",
      "estimated_hours": 2,
      "files_affected": ["TrainingPackUI.cpp"],
      "description": "CalculateOptimalColumnWidths called too frequently",
      "fix_pattern": "threshold_check",
      "implementation": {
        "condition": "std::abs(currentWidth - lastWindowWidth) > 10.0f"
      }
    }
  ],
  "ux_improvements": [
    {      
      "id": "UX-002",
      "title": "Enhanced Search/Filter",
      "priority": "HIGH",
      "complexity": "MEDIUM",
      "estimated_hours": 10,
      "files_affected": ["TrainingPackUI.h", "TrainingPackUI.cpp"],
      "description": "Add quick filter buttons, saved presets, recently used section",
      "new_features": [
        "quick_filter_buttons",
        "saved_filter_presets",
        "recently_used_packs"
      ]
    },
    {
      "id": "UX-003",
      "title": "Keyboard Navigation",
      "priority": "MEDIUM",
      "complexity": "MEDIUM",
      "estimated_hours": 5,
      "files_affected": ["TrainingPackUI.cpp"],
      "description": "Add keyboard shortcuts for pack selection and loading",
      "shortcuts": {
        "down_arrow": "SelectNextPack",
        "up_arrow": "SelectPreviousPack",
        "enter": "LoadSelectedPack",
        "ctrl_f": "FocusSearchBox"
      }
    },
    {
      "id": "UX-005",
      "title": "Consistent Tooltips",
      "priority": "LOW",
      "complexity": "LOW",
      "estimated_hours": 3,
      "files_affected": ["new: TooltipsUI.h", "SettingsUI.cpp", "TrainingPackUI.cpp"],
      "description": "Centralize all tooltip strings and ensure all controls have them"
    }
  ],
  "code_quality": [
    {
      "id": "CODE-001",
      "title": "JSON Error Handling",
      "priority": "MEDIUM",
      "complexity": "LOW",
      "estimated_hours": 4,
      "files_affected": ["TrainingPackManager.cpp"],
      "description": "Add try-catch around JSON parsing with field-level error handling"
    },
    {
      "id": "CODE-002",
      "title": "Logging Consistency",
      "priority": "LOW",
      "complexity": "LOW",
      "estimated_hours": 3,
      "description": "Standardize log format: [Component] Action: details"
    },
    {
      "id": "CODE-003",
      "title": "Magic Numbers",
      "priority": "LOW",
      "complexity": "LOW",
      "estimated_hours": 2,
      "files_affected": ["ConstantsUI.h", "TrainingPackUI.cpp"],
      "description": "Move hardcoded values to named constants"
    }
  ],
 },
  "coding_standards_reference": {
    "null_safety": "Always check wrappers with if (!wrapper) return;",
    "cvar_naming": "suitespot_snake_case",
    "class_naming": "PascalCase",
    "variable_naming": "camelCase",
    "constants_naming": "UPPER_SNAKE_CASE",
    "thread_safety": "Use gameWrapper->Execute() for game thread operations",
    "imgui_patterns": "Use ImGuiListClipper for lists >20 items"
  },
  "testing_checklist": [
    "Plugin compiles without warnings",
    "Plugin loads in Rocket League",
    "F2 menu shows SuiteSpot tab",
    "Training Pack Browser opens",
    "Bag rotation works after match",
    "Loadout switching functions",
    "No crashes on rapid interaction",
    "Settings persist across restarts",
    "Memory usage stable over time"
  ]
}
